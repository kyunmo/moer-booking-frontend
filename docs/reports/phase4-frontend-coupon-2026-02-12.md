# Phase 4: ì¿ í° ë„ë©”ì¸ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ì™„ë£Œ ë³´ê³ ì„œ

**ìž‘ì„±ì¼**: 2026-02-12
**ìž‘ì—… ë²”ìœ„**: ì¿ í° ê´€ë¦¬ ë° ê²°ì œ ì—°ë™ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ðŸ“‹ ìž‘ì—… ê°œìš”

Phase 4ì—ì„œëŠ” ë°±ì—”ë“œì— êµ¬í˜„ëœ ì¿ í° ë„ë©”ì¸ì„ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í™œìš©í•  ìˆ˜ ìžˆë„ë¡ ì „ì²´ UIì™€ ë¡œì§ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì¿ í° ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ê³¼ í•¨ê»˜ ê²°ì œ ì‹œ ì¿ í°ì„ ì ìš©í•˜ì—¬ í• ì¸ì„ ë°›ì„ ìˆ˜ ìžˆëŠ” ê¸°ëŠ¥ì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

---

## ðŸŽ¯ êµ¬í˜„ ëª©í‘œ

1. **ì¿ í° ê´€ë¦¬ ê¸°ëŠ¥**
   - ì¿ í° ìƒì„±/ìˆ˜ì •/ì‚­ì œ
   - ì¿ í° ëª©ë¡ ì¡°íšŒ ë° ê²€ìƒ‰/í•„í„°ë§
   - ì¿ í° ìƒì„¸ ì •ë³´ í™•ì¸
   - ì¿ í° í†µê³„ ëŒ€ì‹œë³´ë“œ

2. **ì¿ í° ìœ í˜• ì§€ì›**
   - ì •ë¥  í• ì¸ (PERCENTAGE): í• ì¸ìœ¨ ê¸°ë°˜ + ìµœëŒ€ í• ì¸ ê¸ˆì•¡ ì„¤ì • ê°€ëŠ¥
   - ì •ì•¡ í• ì¸ (FIXED_AMOUNT): ê³ ì • ê¸ˆì•¡ í• ì¸

3. **ê²°ì œ ì—°ë™**
   - ê²°ì œ íŽ˜ì´ì§€ì—ì„œ ì¿ í° ì½”ë“œ ìž…ë ¥ ë° ê²€ì¦
   - í• ì¸ ê¸ˆì•¡ ì‹¤ì‹œê°„ ê³„ì‚° ë° í‘œì‹œ
   - ê²°ì œ ì‹œ ì¿ í° ì ìš©

4. **ì¿ í° ê²€ì¦**
   - ìœ íš¨ ê¸°ê°„ í™•ì¸
   - ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ í™•ì¸
   - ì‚¬ìš© íšŸìˆ˜ ì œí•œ í™•ì¸

---

## ðŸ“ ìƒì„± ë° ìˆ˜ì •ëœ íŒŒì¼

### 1. API ëª¨ë“ˆ (ìƒì„±)
**íŒŒì¼**: `src/api/coupon.js`

```javascript
const couponApi = {
  createCoupon(data),           // ì¿ í° ìƒì„±
  validateCoupon(code, orderAmount), // ì¿ í° ê²€ì¦
  getCoupon(couponId),          // ì¿ í° ë‹¨ê±´ ì¡°íšŒ
  getCouponList(params),        // ì¿ í° ëª©ë¡ ì¡°íšŒ
  updateCoupon(couponId, data), // ì¿ í° ìˆ˜ì •
  deleteCoupon(couponId),       // ì¿ í° ì‚­ì œ
}
```

**API ì—”ë“œí¬ì¸íŠ¸**:
- `POST /api/coupons` - ì¿ í° ìƒì„±
- `POST /api/coupons/validate` - ì¿ í° ê²€ì¦
- `GET /api/coupons/:id` - ì¿ í° ì¡°íšŒ
- `GET /api/coupons` - ì¿ í° ëª©ë¡ ì¡°íšŒ
- `PUT /api/coupons/:id` - ì¿ í° ìˆ˜ì •
- `DELETE /api/coupons/:id` - ì¿ í° ì‚­ì œ

### 2. Pinia Store (ìƒì„±)
**íŒŒì¼**: `src/stores/coupon.js`

**ìƒíƒœ ê´€ë¦¬**:
```javascript
state: {
  coupons: [],           // ì¿ í° ëª©ë¡
  currentCoupon: null,   // í˜„ìž¬ ì„ íƒëœ ì¿ í°
  validatedCoupon: null, // ê²€ì¦ëœ ì¿ í°
  discountAmount: 0,     // í• ì¸ ê¸ˆì•¡
  loading: false,
  error: null,
  totalCount: 0,
}
```

**Getters** (5ê°œ):
- `activeCoupons`: í™œì„± ì¿ í° ëª©ë¡
- `expiredCoupons`: ë§Œë£Œëœ ì¿ í° ëª©ë¡
- `percentageCoupons`: ì •ë¥  í• ì¸ ì¿ í° ëª©ë¡
- `fixedAmountCoupons`: ì •ì•¡ í• ì¸ ì¿ í° ëª©ë¡
- `couponCounts`: ì¿ í° íƒ€ìž…ë³„ ê°œìˆ˜

**Actions** (8ê°œ):
- `createCoupon`: ì¿ í° ìƒì„±
- `validateCoupon`: ì¿ í° ê²€ì¦ ë° í• ì¸ ê¸ˆì•¡ ê³„ì‚°
- `fetchCoupon`: ì¿ í° ë‹¨ê±´ ì¡°íšŒ
- `fetchCoupons`: ì¿ í° ëª©ë¡ ì¡°íšŒ
- `updateCoupon`: ì¿ í° ìˆ˜ì •
- `deleteCoupon`: ì¿ í° ì‚­ì œ
- `clearValidatedCoupon`: ê²€ì¦ëœ ì¿ í° ì´ˆê¸°í™”
- `reset`: ìƒíƒœ ì´ˆê¸°í™”

**í• ì¸ ê¸ˆì•¡ ê³„ì‚° ë¡œì§**:
```javascript
// ì •ë¥  í• ì¸
if (couponType === 'PERCENTAGE') {
  let discount = Math.floor(orderAmount * (discountPercentage / 100))
  if (maxDiscountAmount && discount > maxDiscountAmount) {
    discount = maxDiscountAmount
  }
  this.discountAmount = discount
}
// ì •ì•¡ í• ì¸
else if (couponType === 'FIXED_AMOUNT') {
  this.discountAmount = Math.min(discountAmount, orderAmount)
}
```

### 3. ì¿ í° ê´€ë¦¬ íŽ˜ì´ì§€ (ìƒì„±)
**íŒŒì¼**: `src/pages/coupon/index.vue`

**ì£¼ìš” ê¸°ëŠ¥**:
1. **í†µê³„ ì¹´ë“œ** (4ê°œ)
   - í™œì„± ì¿ í° ìˆ˜
   - ë§Œë£Œëœ ì¿ í° ìˆ˜
   - ì •ë¥  í• ì¸ ì¿ í° ìˆ˜
   - ì •ì•¡ í• ì¸ ì¿ í° ìˆ˜

2. **ê²€ìƒ‰ ë° í•„í„°ë§**
   - í‚¤ì›Œë“œ ê²€ìƒ‰ (ì¿ í° ì½”ë“œ, ì´ë¦„)
   - ìƒíƒœ í•„í„° (ì „ì²´, í™œì„±, ë§Œë£Œ, ë¹„í™œì„±)

3. **ì¿ í° ì¹´ë“œ í‘œì‹œ**
   - ì¿ í° ì½”ë“œ ë° ì´ë¦„
   - í• ì¸ ì •ë³´ (ì •ë¥ /ì •ì•¡ êµ¬ë¶„)
   - ì‚¬ìš© íšŸìˆ˜ ì§„í–‰ë¥  (VProgressLinear)
   - ìœ íš¨ ê¸°ê°„
   - ìƒíƒœ ë° íƒ€ìž… ì¹©

4. **ì•¡ì…˜ ë²„íŠ¼**
   - ì¿ í° ìƒì„±
   - ì¿ í° ìƒì„¸ ë³´ê¸°
   - ì¿ í° ìˆ˜ì •
   - ì¿ í° ì‚­ì œ

**í• ì¸ ì •ë³´ í¬ë§·íŒ…**:
```javascript
function formatDiscount(coupon) {
  if (coupon.couponType === 'PERCENTAGE') {
    let text = `${coupon.discountPercentage}% í• ì¸`
    if (coupon.maxDiscountAmount) {
      text += ` (ìµœëŒ€ ${formatCurrency(coupon.maxDiscountAmount)})`
    }
    return text
  } else if (coupon.couponType === 'FIXED_AMOUNT') {
    return `${formatCurrency(coupon.discountAmount)} í• ì¸`
  }
}
```

### 4. ì¿ í° í¼ ë‹¤ì´ì–¼ë¡œê·¸ (ìƒì„±)
**íŒŒì¼**: `src/components/coupon/CouponFormDialog.vue`

**í¼ í•„ë“œ**:
1. **ê¸°ë³¸ ì •ë³´**
   - ì¿ í° ì½”ë“œ (4-20ìž, ì˜ë¬¸ ëŒ€ë¬¸ìž/ìˆ«ìž/_/- ë§Œ í—ˆìš©)
   - ì¿ í° ì´ë¦„ (100ìž ì´í•˜)
   - ì¿ í° ì„¤ëª… (ì„ íƒ)

2. **ì¿ í° íƒ€ìž…**
   - ì •ë¥  í• ì¸ (PERCENTAGE)
   - ì •ì•¡ í• ì¸ (FIXED_AMOUNT)

3. **í• ì¸ ì„¤ì •**
   - ì •ë¥  í• ì¸: í• ì¸ìœ¨ (1-100%), ìµœëŒ€ í• ì¸ ê¸ˆì•¡ (ì„ íƒ)
   - ì •ì•¡ í• ì¸: í• ì¸ ê¸ˆì•¡ (1,000ì› ì´ìƒ)

4. **ì‚¬ìš© ì¡°ê±´**
   - ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ (ê¸°ë³¸ê°’: 0ì›)
   - ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜ (ì„ íƒ, ë¯¸ìž…ë ¥ ì‹œ ë¬´ì œí•œ)

5. **ìœ íš¨ ê¸°ê°„**
   - ìœ íš¨ ì‹œìž‘ì¼ (í•„ìˆ˜)
   - ìœ íš¨ ì¢…ë£Œì¼ (í•„ìˆ˜, ì‹œìž‘ì¼ ì´í›„ì—¬ì•¼ í•¨)

**ìœ íš¨ì„± ê²€ì‚¬**:
```javascript
const codeRules = [
  v => !!v || 'ì¿ í° ì½”ë“œëŠ” í•„ìˆ˜ìž…ë‹ˆë‹¤',
  v => /^[A-Z0-9_-]+$/.test(v) || 'ì¿ í° ì½”ë“œëŠ” ì˜ë¬¸ ëŒ€ë¬¸ìž, ìˆ«ìž, _, - ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤',
  v => (v && v.length >= 4 && v.length <= 20) || 'ì¿ í° ì½”ë“œëŠ” 4-20ìžì—¬ì•¼ í•©ë‹ˆë‹¤',
]

const validUntilRules = [
  v => !!v || 'ìœ íš¨ ì¢…ë£Œì¼ì€ í•„ìˆ˜ìž…ë‹ˆë‹¤',
  v => !formData.value.validFrom || !v || new Date(v) > new Date(formData.value.validFrom)
    || 'ì¢…ë£Œì¼ì€ ì‹œìž‘ì¼ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤',
]
```

**í• ì¸ ë¯¸ë¦¬ë³´ê¸°**:
- ìž…ë ¥í•œ í• ì¸ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ VAlertì— í‘œì‹œ
- ì •ë¥  í• ì¸: "10% í• ì¸ (ìµœëŒ€ â‚©10,000)"
- ì •ì•¡ í• ì¸: "â‚©5,000 í• ì¸"
- ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ì´ ìžˆìœ¼ë©´ í•¨ê»˜ í‘œì‹œ

### 5. ê²°ì œ íŽ˜ì´ì§€ (ìˆ˜ì •)
**íŒŒì¼**: `src/pages/payment/index.vue`

**ì¶”ê°€ëœ ê¸°ëŠ¥**:

1. **ì¿ í° ì ìš© UI**
   - ì¿ í° ì½”ë“œ ìž…ë ¥ í•„ë“œ
   - "ì ìš©" ë²„íŠ¼
   - ì ìš©ëœ ì¿ í° ì •ë³´ í‘œì‹œ (VAlert)
   - ì¿ í° ì·¨ì†Œ ë²„íŠ¼

2. **ê²°ì œ ê¸ˆì•¡ ìƒì„¸ í‘œì‹œ**
   ```
   ìƒí’ˆ ê¸ˆì•¡:    â‚©79,000
   ì¿ í° í• ì¸:    -â‚©7,900
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ìµœì¢… ê²°ì œ ê¸ˆì•¡: â‚©71,100
   ```

3. **ì¿ í° ê²€ì¦ ë¡œì§**
   ```javascript
   async function validateAndApplyCoupon() {
     if (!couponCode.value) {
       showSnackbar('ì¿ í° ì½”ë“œë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.', 'warning')
       return
     }

     if (!selectedPlan.value) {
       showSnackbar('ë¨¼ì € í”Œëžœì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'warning')
       return
     }

     const orderAmount = selectedPlanInfo.value?.price

     const validatedCoupon = await couponStore.validateCoupon(couponCode.value, orderAmount)
     appliedCoupon.value = validatedCoupon
     showSnackbar(`ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤! ${formatCurrency(couponStore.discountAmount)} í• ì¸`, 'success')
   }
   ```

4. **ì¿ í° ì·¨ì†Œ ê¸°ëŠ¥**
   ```javascript
   function removeCoupon() {
     appliedCoupon.value = null
     couponCode.value = ''
     couponStore.clearValidatedCoupon()
     showSnackbar('ì¿ í°ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info')
   }
   ```

5. **í”Œëžœ ë³€ê²½ ì‹œ ì¿ í° ìž¬ê²€ì¦**
   - í”Œëžœì„ ë³€ê²½í•˜ë©´ ìžë™ìœ¼ë¡œ ì¿ í°ì„ ìž¬ê²€ì¦
   - í• ì¸ ê¸ˆì•¡ì´ ì£¼ë¬¸ ê¸ˆì•¡ì— ë§žê²Œ ìž¬ê³„ì‚°ë¨

6. **ê²°ì œ ì‹œ ì¿ í° ì½”ë“œ ì „ë‹¬**
   ```javascript
   const result = await paymentStore.createPayment(
     selectedPlan.value,
     selectedPaymentMethod.value,
     appliedCoupon.value?.code || null, // ì¿ í° ì½”ë“œ ì „ë‹¬
   )
   ```

7. **ê²°ì œ ì™„ë£Œ ì‹œ ì¿ í° ìƒíƒœ ì´ˆê¸°í™”**
   ```javascript
   if (result.status === 'COMPLETED') {
     // ì¿ í° ìƒíƒœ ì´ˆê¸°í™”
     appliedCoupon.value = null
     couponCode.value = ''
     couponStore.clearValidatedCoupon()
   }
   ```

### 6. ê²°ì œ Store (ìˆ˜ì •)
**íŒŒì¼**: `src/stores/payment.js`

**ë³€ê²½ ì‚¬í•­**:
- `createPayment` ì•¡ì…˜ì— `couponCode` íŒŒë¼ë¯¸í„° ì¶”ê°€
- ì¿ í° ì½”ë“œê°€ ìžˆìœ¼ë©´ ê²°ì œ ìš”ì²­ì— í¬í•¨

```javascript
async createPayment(plan, paymentMethod, couponCode = null) {
  const requestData = {
    plan,
    paymentMethod,
  }

  // ì¿ í° ì½”ë“œê°€ ìžˆìœ¼ë©´ ì¶”ê°€
  if (couponCode) {
    requestData.couponCode = couponCode
  }

  const { data } = await paymentApi.createPayment(requestData)
  return data
}
```

### 7. ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ (ìˆ˜ì •)
**íŒŒì¼**: `src/navigation/vertical/index.js`

**ì¶”ê°€ëœ ë©”ë‰´**:
```javascript
{
  title: 'êµ¬ë… & ê²°ì œ',
  icon: { icon: 'ri-vip-crown-line' },
  children: [
    { title: 'êµ¬ë… ê´€ë¦¬', to: { name: 'subscription' } },
    { title: 'ê²°ì œ ë‚´ì—­', to: { name: 'payment-history' } },
    { title: 'ì¿ í° ê´€ë¦¬', to: { name: 'coupon' } }, // ìƒˆë¡œ ì¶”ê°€
  ],
}
```

---

## ðŸŽ¨ UI/UX íŠ¹ì§•

### 1. ì¿ í° ê´€ë¦¬ íŽ˜ì´ì§€
- **í†µê³„ ì¹´ë“œ**: í•œëˆˆì— ì¿ í° í˜„í™© íŒŒì•…
- **ì¹´ë“œ ë ˆì´ì•„ì›ƒ**: ì¿ í° ì •ë³´ë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„
- **ì§„í–‰ë¥  í‘œì‹œ**: ì‚¬ìš© íšŸìˆ˜ë¥¼ VProgressLinearë¡œ ì§ê´€ì  í‘œì‹œ
- **ìƒíƒœ ì¹©**: ìƒ‰ìƒìœ¼ë¡œ ì¿ í° ìƒíƒœ êµ¬ë¶„
  - í™œì„±: ì´ˆë¡ìƒ‰
  - ë§Œë£Œ: íšŒìƒ‰
  - ë¹„í™œì„±: ë¹¨ê°„ìƒ‰

### 2. ì¿ í° í¼ ë‹¤ì´ì–¼ë¡œê·¸
- **ì¡°ê±´ë¶€ í•„ë“œ**: ì¿ í° íƒ€ìž…ì— ë”°ë¼ í•„ìš”í•œ í•„ë“œë§Œ í‘œì‹œ
- **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: ìž…ë ¥í•œ í• ì¸ ì •ë³´ë¥¼ ì¦‰ì‹œ í™•ì¸
- **ìœ íš¨ì„± ê²€ì‚¬**: ìž…ë ¥ ì¦‰ì‹œ ê²€ì¦ í”¼ë“œë°±
- **ë‚ ì§œ ì„ íƒ**: HTML5 date input í™œìš©

### 3. ê²°ì œ íŽ˜ì´ì§€
- **ì¿ í° ì ìš© í”Œë¡œìš°**:
  1. ì¿ í° ì½”ë“œ ìž…ë ¥
  2. "ì ìš©" ë²„íŠ¼ í´ë¦­
  3. ì„œë²„ ê²€ì¦
  4. ì„±ê³µ ì‹œ í• ì¸ ê¸ˆì•¡ í‘œì‹œ
  5. ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- **í• ì¸ ê¸ˆì•¡ êµ¬ë¶„ í‘œì‹œ**: ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í• ì¸ ê¸ˆì•¡ ê°•ì¡°
- **ìµœì¢… ê¸ˆì•¡ ê°•ì¡°**: íŒŒëž€ìƒ‰ í° ê¸€ì”¨ë¡œ í‘œì‹œ

---

## ðŸ’¡ ì£¼ìš” ê¸°ìˆ  êµ¬í˜„

### 1. ì¿ í° ê²€ì¦ ë° í• ì¸ ê³„ì‚°
```javascript
// Storeì—ì„œ í• ì¸ ê¸ˆì•¡ ê³„ì‚°
async validateCoupon(code, orderAmount) {
  const { data } = await couponApi.validateCoupon(code, orderAmount)
  this.validatedCoupon = data

  // í• ì¸ ê¸ˆì•¡ ê³„ì‚°
  if (data.couponType === 'PERCENTAGE') {
    let discount = Math.floor(orderAmount * (data.discountPercentage / 100))
    if (data.maxDiscountAmount && discount > data.maxDiscountAmount) {
      discount = data.maxDiscountAmount
    }
    this.discountAmount = discount
  } else if (data.couponType === 'FIXED_AMOUNT') {
    this.discountAmount = Math.min(data.discountAmount, orderAmount)
  }

  return data
}
```

### 2. ë°˜ì‘í˜• í• ì¸ ê¸ˆì•¡ í‘œì‹œ
```javascript
// ì›ëž˜ ê¸ˆì•¡
const originalAmount = computed(() => {
  return selectedPlanInfo.value?.price || 0
})

// í• ì¸ ê¸ˆì•¡
const discountAmount = computed(() => {
  return appliedCoupon.value ? couponStore.discountAmount : 0
})

// ìµœì¢… ê²°ì œ ê¸ˆì•¡
const finalAmount = computed(() => {
  return Math.max(0, originalAmount.value - discountAmount.value)
})
```

### 3. ì¿ í° ìž¬ê²€ì¦ (í”Œëžœ ë³€ê²½ ì‹œ)
```javascript
function selectPlan(plan) {
  selectedPlan.value = plan
  // í”Œëžœ ë³€ê²½ ì‹œ ì¿ í° ìž¬ê²€ì¦
  if (appliedCoupon.value) {
    validateAndApplyCoupon()
  }
}
```

### 4. í¼ ìœ íš¨ì„± ê²€ì‚¬
```javascript
// ì¿ í° ì½”ë“œ ê·œì¹™
const codeRules = [
  v => !!v || 'ì¿ í° ì½”ë“œëŠ” í•„ìˆ˜ìž…ë‹ˆë‹¤',
  v => /^[A-Z0-9_-]+$/.test(v) || 'ì¿ í° ì½”ë“œëŠ” ì˜ë¬¸ ëŒ€ë¬¸ìž, ìˆ«ìž, _, - ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤',
  v => (v && v.length >= 4 && v.length <= 20) || 'ì¿ í° ì½”ë“œëŠ” 4-20ìžì—¬ì•¼ í•©ë‹ˆë‹¤',
]

// í• ì¸ìœ¨ ê·œì¹™ (ì¡°ê±´ë¶€)
const discountPercentageRules = [
  v => formData.value.couponType !== 'PERCENTAGE' || !!v || 'í• ì¸ìœ¨ì€ í•„ìˆ˜ìž…ë‹ˆë‹¤',
  v => formData.value.couponType !== 'PERCENTAGE' || (v >= 1 && v <= 100)
    || 'í• ì¸ìœ¨ì€ 1-100% ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤',
]
```

---

## ðŸ”„ í†µí•© í”Œë¡œìš°

### 1. ì¿ í° ìƒì„± í”Œë¡œìš°
```
1. ì¿ í° ê´€ë¦¬ íŽ˜ì´ì§€ ì ‘ì†
2. "ì¿ í° ìƒì„±" ë²„íŠ¼ í´ë¦­
3. CouponFormDialog ì—´ë¦¼
4. í¼ ìž‘ì„± ë° ìœ íš¨ì„± ê²€ì‚¬
5. "ìƒì„±" ë²„íŠ¼ í´ë¦­
6. API í˜¸ì¶œ (POST /api/coupons)
7. ì„±ê³µ ì‹œ ëª©ë¡ ê°±ì‹  ë° ìŠ¤ë‚µë°” í‘œì‹œ
```

### 2. ì¿ í° ì ìš© í”Œë¡œìš°
```
1. ê²°ì œ íŽ˜ì´ì§€ ì ‘ì†
2. í”Œëžœ ì„ íƒ
3. ì¿ í° ì½”ë“œ ìž…ë ¥
4. "ì ìš©" ë²„íŠ¼ í´ë¦­
5. API í˜¸ì¶œ (POST /api/coupons/validate)
6. ì„œë²„ì—ì„œ ê²€ì¦:
   - ì¿ í° ì¡´ìž¬ ì—¬ë¶€
   - ìœ íš¨ ê¸°ê°„
   - ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡
   - ì‚¬ìš© íšŸìˆ˜ ì œí•œ
7. í´ë¼ì´ì–¸íŠ¸ì—ì„œ í• ì¸ ê¸ˆì•¡ ê³„ì‚°
8. í• ì¸ ê¸ˆì•¡ í‘œì‹œ
9. ê²°ì œí•˜ê¸° í´ë¦­
10. ê²°ì œ APIì— ì¿ í° ì½”ë“œ ì „ë‹¬
11. ì„œë²„ì—ì„œ ì¿ í° ì‚¬ìš© ì²˜ë¦¬
```

### 3. ì¿ í° ìˆ˜ì • í”Œë¡œìš°
```
1. ì¿ í° ì¹´ë“œì—ì„œ "ìˆ˜ì •" ë²„íŠ¼ í´ë¦­
2. CouponFormDialog ì—´ë¦¼ (íŽ¸ì§‘ ëª¨ë“œ)
3. ê¸°ì¡´ ë°ì´í„° ë¡œë“œ
4. ìˆ˜ì • í›„ "ìˆ˜ì •" ë²„íŠ¼ í´ë¦­
5. API í˜¸ì¶œ (PUT /api/coupons/:id)
6. ì„±ê³µ ì‹œ ëª©ë¡ ê°±ì‹ 
```

---

## ðŸ“Š ë°ì´í„° êµ¬ì¡°

### ì¿ í° Entity
```typescript
{
  id: number,
  code: string,              // ì¿ í° ì½”ë“œ (4-20ìž)
  name: string,              // ì¿ í° ì´ë¦„
  description: string,       // ì¿ í° ì„¤ëª…
  couponType: 'PERCENTAGE' | 'FIXED_AMOUNT',
  discountPercentage: number | null,  // ì •ë¥  í• ì¸ìœ¨ (1-100)
  discountAmount: number | null,      // ì •ì•¡ í• ì¸ ê¸ˆì•¡
  maxDiscountAmount: number | null,   // ìµœëŒ€ í• ì¸ ê¸ˆì•¡ (ì •ë¥  ì „ìš©)
  minOrderAmount: number,             // ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡
  maxUsageCount: number | null,       // ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜
  usageCount: number,                 // í˜„ìž¬ ì‚¬ìš© íšŸìˆ˜
  validFrom: string,                  // ìœ íš¨ ì‹œìž‘ì¼ (ISO 8601)
  validUntil: string,                 // ìœ íš¨ ì¢…ë£Œì¼ (ISO 8601)
  status: 'ACTIVE' | 'EXPIRED' | 'DISABLED',
  isExpired: boolean,                 // ë§Œë£Œ ì—¬ë¶€ (ì„œë²„ ê³„ì‚°)
  createdAt: string,
  updatedAt: string,
}
```

---

## âœ… í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. ì¿ í° ìƒì„±
- [ ] ì •ë¥  í• ì¸ ì¿ í° ìƒì„± (10% í• ì¸, ìµœëŒ€ 5,000ì›)
- [ ] ì •ì•¡ í• ì¸ ì¿ í° ìƒì„± (5,000ì› í• ì¸)
- [ ] ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ ì„¤ì • (20,000ì› ì´ìƒ)
- [ ] ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜ ì„¤ì • (100íšŒ)
- [ ] ìœ íš¨ ê¸°ê°„ ì„¤ì •
- [ ] ìž˜ëª»ëœ ì¿ í° ì½”ë“œ ìž…ë ¥ ì‹œ ì—ëŸ¬ í‘œì‹œ

### 2. ì¿ í° ê²€ìƒ‰ ë° í•„í„°ë§
- [ ] í‚¤ì›Œë“œë¡œ ì¿ í° ê²€ìƒ‰
- [ ] ìƒíƒœë³„ í•„í„°ë§ (í™œì„±, ë§Œë£Œ, ë¹„í™œì„±)
- [ ] ê²€ìƒ‰ ê²°ê³¼ ì—†ì„ ë•Œ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ

### 3. ì¿ í° ì ìš©
- [ ] ìœ íš¨í•œ ì¿ í° ì ìš© ì„±ê³µ
- [ ] ë§Œë£Œëœ ì¿ í° ì ìš© ì‹¤íŒ¨
- [ ] ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ ë¯¸ë‹¬ ì‹œ ì‹¤íŒ¨
- [ ] ì‚¬ìš© íšŸìˆ˜ ì´ˆê³¼ ì‹œ ì‹¤íŒ¨
- [ ] ì •ë¥  í• ì¸ ì¿ í° ìµœëŒ€ í• ì¸ ê¸ˆì•¡ ì œí•œ í™•ì¸
- [ ] í”Œëžœ ë³€ê²½ ì‹œ í• ì¸ ê¸ˆì•¡ ìž¬ê³„ì‚°

### 4. ê²°ì œ í†µí•©
- [ ] ì¿ í° ì ìš© í›„ ê²°ì œ ì™„ë£Œ
- [ ] ê²°ì œ ì™„ë£Œ í›„ ì¿ í° ì‚¬ìš© íšŸìˆ˜ ì¦ê°€ í™•ì¸
- [ ] ê²°ì œ ì‹¤íŒ¨ ì‹œ ì¿ í° ì‚¬ìš© ì·¨ì†Œ í™•ì¸
- [ ] ê²°ì œ í™˜ë¶ˆ ì‹œ ì¿ í° ë³µì› í™•ì¸ (ë°±ì—”ë“œ ì²˜ë¦¬)

### 5. ì¿ í° ìˆ˜ì • ë° ì‚­ì œ
- [ ] ì¿ í° ì •ë³´ ìˆ˜ì • ì„±ê³µ
- [ ] ì¿ í° ì‚­ì œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- [ ] ì¿ í° ì‚­ì œ ì„±ê³µ

---

## ðŸŽ¯ ì™„ë£Œ ê¸°ì¤€ ì¶©ì¡± ì—¬ë¶€

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| ì¿ í° API ëª¨ë“ˆ êµ¬í˜„ | âœ… | 6ê°œ API í•¨ìˆ˜ êµ¬í˜„ |
| ì¿ í° Store êµ¬í˜„ | âœ… | 5ê°œ getters, 8ê°œ actions |
| ì¿ í° ê´€ë¦¬ íŽ˜ì´ì§€ | âœ… | í†µê³„, ëª©ë¡, ê²€ìƒ‰, í•„í„°ë§ |
| ì¿ í° í¼ ë‹¤ì´ì–¼ë¡œê·¸ | âœ… | ìƒì„±/ìˆ˜ì • í†µí•© í¼ |
| ê²°ì œ íŽ˜ì´ì§€ ì¿ í° ì ìš© | âœ… | ì¿ í° ìž…ë ¥, ê²€ì¦, í• ì¸ í‘œì‹œ |
| ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ì¶”ê°€ | âœ… | ì¿ í° ê´€ë¦¬ ë©”ë‰´ ì¶”ê°€ |
| í• ì¸ ê¸ˆì•¡ ê³„ì‚° ë¡œì§ | âœ… | ì •ë¥ /ì •ì•¡ ëª¨ë‘ ì§€ì› |
| ì¿ í° ê²€ì¦ ë¡œì§ | âœ… | ìœ íš¨ ê¸°ê°„, ìµœì†Œ ê¸ˆì•¡, ì‚¬ìš© íšŸìˆ˜ |
| ë°˜ì‘í˜• UI | âœ… | VRow/VCol í™œìš© |
| ì—ëŸ¬ í•¸ë“¤ë§ | âœ… | try-catch + ìŠ¤ë‚µë°” |

---

## ðŸ” ì¶”ê°€ êµ¬í˜„ ì‚¬í•­

### ë°±ì—”ë“œ í†µí•© í™•ì¸ í•„ìš”
1. **ê²°ì œ API ìˆ˜ì •**
   - ê²°ì œ ìš”ì²­ ì‹œ `couponCode` íŒŒë¼ë¯¸í„° ë°›ë„ë¡ ìˆ˜ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
   - ì¿ í° ì ìš© í›„ í• ì¸ëœ ê¸ˆì•¡ìœ¼ë¡œ ê²°ì œ ì²˜ë¦¬ë˜ëŠ”ì§€ í™•ì¸

2. **ì¿ í° ì‚¬ìš© ì²˜ë¦¬**
   - ê²°ì œ ì™„ë£Œ ì‹œ ì¿ í° ì‚¬ìš© íšŸìˆ˜ ì¦ê°€ í™•ì¸
   - ê²°ì œ ì‹¤íŒ¨ ì‹œ ì¿ í° ì‚¬ìš© ì·¨ì†Œ í™•ì¸

3. **í™˜ë¶ˆ ì²˜ë¦¬**
   - ê²°ì œ í™˜ë¶ˆ ì‹œ ì¿ í° ë³µì› (ì‚¬ìš© íšŸìˆ˜ ê°ì†Œ) í™•ì¸

### ì¶”ê°€ ê°œì„  ê°€ëŠ¥ í•­ëª©
1. **ì¿ í° ì‚¬ìš© ë‚´ì—­ íŽ˜ì´ì§€**
   - ì¿ í°ë³„ ì‚¬ìš© ë‚´ì—­ ì¡°íšŒ
   - ì‚¬ìš©ìžë³„ ì¿ í° ì‚¬ìš© í†µê³„

2. **ì¿ í° ì¼ê´„ ìƒì„±**
   - CSV íŒŒì¼ë¡œ ì¿ í° ëŒ€ëŸ‰ ìƒì„±
   - ì¿ í° ì½”ë“œ ìžë™ ìƒì„± ê¸°ëŠ¥

3. **ì¿ í° ë³µì‚¬ ê¸°ëŠ¥**
   - ê¸°ì¡´ ì¿ í° ë³µì‚¬í•˜ì—¬ ìƒˆ ì¿ í° ìƒì„±
   - ì½”ë“œë§Œ ë³€ê²½í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë™ì¼í•˜ê²Œ

4. **ì¿ í° í…œí”Œë¦¿**
   - ìžì£¼ ì‚¬ìš©í•˜ëŠ” ì¿ í° ì„¤ì •ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì €ìž¥
   - í…œí”Œë¦¿ì—ì„œ ìƒˆ ì¿ í° ë¹ ë¥´ê²Œ ìƒì„±

---

## ðŸ“ ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë ˆìž„ì›Œí¬**: Vue 3 (Composition API)
- **ìƒíƒœ ê´€ë¦¬**: Pinia
- **UI ë¼ì´ë¸ŒëŸ¬ë¦¬**: Vuetify 3
- **HTTP í´ë¼ì´ì–¸íŠ¸**: Axios
- **ë¼ìš°íŒ…**: unplugin-vue-router (file-based routing)
- **ì•„ì´ì½˜**: Remix Icon

---

## ðŸš€ ë‹¤ìŒ ë‹¨ê³„

Phase 4 ì¿ í° ë„ë©”ì¸ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ëŠ”:

1. **í†µí•© í…ŒìŠ¤íŠ¸**
   - ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸
   - ì‹¤ì œ ì¿ í° ìƒì„±/ì ìš©/ê²°ì œ í”Œë¡œìš° í…ŒìŠ¤íŠ¸

2. **QA ë° ë²„ê·¸ ìˆ˜ì •**
   - ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
   - ì‚¬ìš©ìž í”¼ë“œë°± ë°˜ì˜

3. **Phase 5 ì¤€ë¹„**
   - ë‹¤ìŒ ë„ë©”ì¸ ë°±ì—”ë“œ ë¬¸ì„œ í™•ì¸
   - í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ê³„íš ìˆ˜ë¦½

---

## ðŸ“Œ ì°¸ê³  ì‚¬í•­

### ì¿ í° ì½”ë“œ ê·œì¹™
- ê¸¸ì´: 4-20ìž
- í—ˆìš© ë¬¸ìž: ì˜ë¬¸ ëŒ€ë¬¸ìž(A-Z), ìˆ«ìž(0-9), ì–¸ë”ìŠ¤ì½”ì–´(_), í•˜ì´í”ˆ(-)
- ì˜ˆì‹œ: `WELCOME2024`, `SUMMER-SALE`, `VIP_DISCOUNT`

### í• ì¸ ê³„ì‚° ê·œì¹™
1. **ì •ë¥  í• ì¸ (PERCENTAGE)**
   - í• ì¸ ê¸ˆì•¡ = ì£¼ë¬¸ ê¸ˆì•¡ Ã— (í• ì¸ìœ¨ / 100)
   - ìµœëŒ€ í• ì¸ ê¸ˆì•¡ì´ ì„¤ì •ëœ ê²½ìš°, ê·¸ ì´ìƒ í• ì¸ë˜ì§€ ì•ŠìŒ
   - ì˜ˆ: 79,000ì› ì£¼ë¬¸ì— 10% ì¿ í° (ìµœëŒ€ 5,000ì›) â†’ 5,000ì› í• ì¸

2. **ì •ì•¡ í• ì¸ (FIXED_AMOUNT)**
   - í• ì¸ ê¸ˆì•¡ = ì¿ í°ì˜ í• ì¸ ê¸ˆì•¡
   - ì£¼ë¬¸ ê¸ˆì•¡ë³´ë‹¤ í´ ìˆ˜ ì—†ìŒ (ìµœì¢… ê¸ˆì•¡ì€ í•­ìƒ 0ì› ì´ìƒ)
   - ì˜ˆ: 29,000ì› ì£¼ë¬¸ì— 5,000ì› ì¿ í° â†’ 5,000ì› í• ì¸

### ì¿ í° ê²€ì¦ ì¡°ê±´
1. ì¿ í° ì½”ë“œ ì¡´ìž¬ ì—¬ë¶€
2. ì¿ í° ìƒíƒœê°€ ACTIVEì¸ì§€
3. í˜„ìž¬ ë‚ ì§œê°€ ìœ íš¨ ê¸°ê°„ ë‚´ì¸ì§€
4. ì£¼ë¬¸ ê¸ˆì•¡ì´ ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ ì´ìƒì¸ì§€
5. ì‚¬ìš© íšŸìˆ˜ê°€ ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜ ë¯¸ë§Œì¸ì§€ (ì„¤ì •ëœ ê²½ìš°)

---

## âœ¨ ë§ˆë¬´ë¦¬

Phase 4 ì¿ í° ë„ë©”ì¸ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.

**êµ¬í˜„ëœ ì£¼ìš” ê¸°ëŠ¥**:
- âœ… ì¿ í° CRUD ì „ì²´ ê¸°ëŠ¥
- âœ… ì •ë¥ /ì •ì•¡ í• ì¸ íƒ€ìž… ì§€ì›
- âœ… ê²°ì œ íŽ˜ì´ì§€ ì¿ í° ì ìš© ë° í• ì¸ í‘œì‹œ
- âœ… ì¿ í° ê²€ì¦ ë° í• ì¸ ê¸ˆì•¡ ê³„ì‚°
- âœ… í†µê³„ ëŒ€ì‹œë³´ë“œ ë° ì‚¬ìš© í˜„í™© í‘œì‹œ

**ì½”ë“œ í’ˆì§ˆ**:
- ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— ì ì ˆí•œ ì—ëŸ¬ í•¸ë“¤ë§ ì ìš©
- ë°˜ì‘í˜• UI êµ¬í˜„ìœ¼ë¡œ ëª¨ë°”ì¼ í™˜ê²½ ì§€ì›
- Vuetify ì»´í¬ë„ŒíŠ¸ í™œìš©ìœ¼ë¡œ ì¼ê´€ëœ ë””ìžì¸
- Piniaë¥¼ í™œìš©í•œ íš¨ìœ¨ì ì¸ ìƒíƒœ ê´€ë¦¬

Phase 4 ìž‘ì—…ì´ ì™„ë£Œë˜ì–´ ì‚¬ìš©ìžëŠ” ì´ì œ ì¿ í°ì„ ìƒì„±í•˜ê³ , ê²°ì œ ì‹œ í• ì¸ í˜œíƒì„ ë°›ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤! ðŸŽ‰

---

**ìž‘ì„±ìž**: Claude Code
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-02-12
